# 智能代接功能使用指南

## 🚀 功能概述

智能代接功能是AgileMind系统的核心功能之一，能够根据不同场景自动接听电话并播放相应的回复语音。支持多种预设场景模式和自定义回复，让您在繁忙时也能智能应对各种来电。

## 📋 主要特性

### ✅ 9种智能场景模式
- **工作模式** - 专业的工作环境回复
- **会议模式** - 会议中的礼貌回复
- **外卖模式** - 外卖配送专用回复
- **陌生电话模式** - 未知来电的安全回复
- **忙碌模式** - 通用忙碌状态回复
- **休息模式** - 休息时间专用回复
- **驾驶模式** - 驾驶安全专用回复
- **学习模式** - 学习时间专用回复
- **医院模式** - 医院等特殊场所回复

### ✅ 自定义回复功能
- 为每个场景设置个性化回复语
- 支持中文语音播放
- 回复内容永久保存

### ✅ 智能响铃控制
- 可设置响铃延迟时间（默认10秒）
- 未开启代接时自动使用忙碌模式回复
- 开启代接时立即响应

### ✅ 通话记录管理
- 自动记录所有来电信息
- 区分自动代接和手动接听
- 支持24小时内通话统计

## 🎯 使用方式

### 方式一：主界面集成使用
```bash
streamlit run universal_ai_assistant_web.py
```

在主界面的聊天框中，您可以使用自然语言指令：

**开启/关闭功能：**
- "开启智能代接"
- "关闭智能代接" 
- "智能代接状态"

**切换场景模式：**
- "切换到会议模式"
- "设置外卖模式"
- "工作模式"
- "陌生电话模式"

**自定义回复设置：**
- "设置会议模式回复为：正在开会中，有事请留言"
- "外卖模式自定义回复：请把外卖放在门口，谢谢"

### 方式二：专用界面使用
```bash
streamlit run phone_auto_answer_ui.py
```

通过专用的图形化界面进行详细配置和管理。

## 📱 场景模式详解

### 1. 工作模式 (WORK)
**适用场景：** 办公时间、工作状态
**默认回复：** "您好，我现在正在工作无法接听电话。请留言或稍后再拨，我会尽快回复您。"

### 2. 会议模式 (MEETING)  
**适用场景：** 开会、重要商务场合
**默认回复：** "不好意思，我现在正在开会无法接听电话。请留言说明事由，我会尽快联系您。"

### 3. 外卖模式 (DELIVERY)
**适用场景：** 等待外卖、快递配送
**默认回复：** "您好，如果是外卖配送，请直接放在门口。如有其他事宜，请稍后再拨。谢谢！"

### 4. 陌生电话模式 (UNKNOWN)
**适用场景：** 未知号码来电
**默认回复：** "您好，请问您找哪位？请说明来意，我会记录您的留言。"
**特殊功能：** 自动记录通话内容

### 5. 忙碌模式 (BUSY)
**适用场景：** 通用忙碌状态、默认模式
**默认回复：** "对不起，我现在很忙无法接听电话。请稍后再拨，或发送短信说明事由。谢谢理解。"

### 6. 休息模式 (REST)
**适用场景：** 休息时间、非工作时段
**默认回复：** "现在是我的休息时间，无法接听电话。如有紧急事务，请发送短信。"

### 7. 驾驶模式 (DRIVING)
**适用场景：** 开车、驾驶状态
**默认回复：** "我现在正在开车，为了安全无法接听电话。请稍后再拨或发送短信。"

### 8. 学习模式 (STUDY)
**适用场景：** 学习、专注工作
**默认回复：** "我现在正在学习，无法接听电话。请留言或稍后联系，我会尽快回复。"

### 9. 医院模式 (HOSPITAL)
**适用场景：** 医院、图书馆等安静场所
**默认回复：** "我现在在安静的环境中，不便接听电话。请发送短信或稍后联系。"

## ⚙️ 高级设置

### 自定义回复语设置
```python
# 通过主界面设置
"设置外卖模式回复为：您好，请把外卖放在外卖柜里，密码是1234"

# 或者通过API
phone_set_custom_response("delivery", "您好，请把外卖放在外卖柜里，密码是1234")
```

### 响铃延迟设置
```python
# 设置响铃延迟为15秒
phone_set_ring_delay(15)
```

### 模拟来电测试
```python
# 模拟来电测试功能
phone_simulate_call("138-0000-1111", "张三", "work")
```

## 📊 状态监控

### 查看当前状态
在主界面输入"智能代接状态"可查看：
- 代接功能开启/关闭状态
- 当前场景模式
- 今日通话统计
- 总通话数量
- 可用场景列表

### 通话记录
- 自动记录所有来电
- 包含来电号码、姓名、时长
- 区分自动代接和手动处理
- 支持历史记录查询

## 🔧 技术特性

### 设备兼容性
- 支持Android设备
- 通过ADB连接控制
- 兼容主流Android版本

### 语音播放
- 使用系统TTS引擎
- 支持中文语音合成
- 可调节播放速度和音量

### 数据持久化
- 配置信息自动保存
- 通话记录永久存储
- 自定义回复跨会话保持

## 🚨 注意事项

1. **设备连接**：使用前请确保Android设备已连接并开启USB调试
2. **权限设置**：需要电话和音频相关权限
3. **网络要求**：语音合成可能需要网络连接
4. **电池优化**：建议将应用加入电池优化白名单
5. **紧急电话**：紧急情况下可通过物理按键强制接听

## 💡 使用技巧

1. **场景切换**：可根据日程自动切换场景模式
2. **个性化回复**：为常用场景设置专属回复语
3. **测试功能**：使用模拟来电功能测试设置效果
4. **统计分析**：定期查看通话统计了解使用情况
5. **备份设置**：重要的自定义设置建议定期备份

## 🆘 常见问题

**Q: 为什么无法自动接听？**
A: 检查设备连接、权限设置和功能开启状态

**Q: 语音播放失败怎么办？**
A: 确认系统TTS设置正常，网络连接稳定

**Q: 如何恢复默认设置？**
A: 删除配置文件或重新安装应用

**Q: 支持多设备吗？**
A: 目前支持单设备，多设备功能正在开发中

---

🎉 **开始使用智能代接，让AI帮您处理每一通来电！**
